complies with base + filter
Updates hasWasteclass and isUsedUntil fields